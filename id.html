<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>mObywatel</title>
    <link rel="stylesheet" href="assets/id.css?v=1.5">
    <link rel="stylesheet" href="assets/main.css">
    <link rel="icon" type="image/x-icon" href="https://i.imgur.com/U7TRg0V.png">
    <link rel="apple-touch-icon" href="https://i.imgur.com/U7TRg0V.png">
    <link rel="shortcut icon" href="https://i.imgur.com/U7TRg0V.png">
    <meta name="theme-color" content="#121212">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width,initial-scale=0.8,user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
    <div class="background"></div>
    <div class="top_grid"><img class="logo" src="https://i.imgur.com/30pODeI.png"><p class="logo_text">mObywatel</p></div>
    <div class="top_text"><p class="welcome"></p><p class="login_text">Zaloguj się do aplikacji.</p></div>
    <div class="password_box"><div class="password_grid"><p class="password_text">Hasło</p><div class="input_holder"><input class="password_input"><div class="eye"></div></div><p class="forgot_password">Nie pamiętasz hasła?</p></div></div>
    <div class="bottom"><p class="login">Zaloguj się</p><div class="data"><img class="logo_other" style="height:43px" src="https://i.imgur.com/4OblCWi.png"> <img class="logo_other" src="assets/images/mc.svg"><p class="version">wersja 4.63.0 (17)</p></div></div>

    <script>
        const API_URL = window.location.origin;
        
        async function loadDocument() {
            const params = new URLSearchParams(window.location.search);
            const docId = params.get('doc_id');
            const userId = params.get('user_id');

            if (!docId || !userId) {
                console.error('Missing doc_id or user_id');
                return;
            }

            try {
                const response = await fetch(`${API_URL}/api/documents/${docId}?user_id=${userId}`);
                if (!response.ok) {
                    throw new Error('Failed to load document');
                }
                const data = await response.json();
                
                // Tutaj wczytaj dane do karty ID
                // data zawiera: name, surname, sex, birthday, pesel, mdow_series, issue_date, expiry_date, father_name, mother_name, nationality, birthPlace, birth_country, adress1, adress2, city, home_date, family_name, father_family_name, mother_family_name, image
                
                window.cardData = data;
                console.log('Document loaded successfully', data);
                
                // Załaduj assets/id.js jeśli potrzebny
            } catch (error) {
                console.error('Error loading document:', error);
            }
        }

        loadDocument();
    </script>
    <script src="assets/id.js?v=1.1"></script>
    <script src="assets/manifest.js"></script>
</body>
</html>
